<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Game of the Generals – Mobile Arbiter</title>

<style>
  body {
    font-family: Arial;
    margin: 0;
    padding: 20px;
    background: #f2f2f2;
  }
  .container {
    max-width: 450px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  h1 {
    font-size: 22px;
    text-align: center;
    margin-bottom: 20px;
  }
  label {
    font-size: 18px;
    font-weight: bold;
  }
  select {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    margin-top: 5px;
    margin-bottom: 20px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }
  button {
    width: 100%;
    padding: 15px;
    background: #0066ff;
    color: white;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    margin-top: 10px;
  }
  button:active {
    background: #004bcc;
  }
  #output {
    margin-top: 25px;
    font-size: 26px;
    font-weight: bold;
    text-align: center;
  }
  .note {
    font-size: 13px;
    text-align: center;
    color: #666;
  }
</style>
</head>

<body>

<div class="container">
<h1>Game of the Generals – Arbiter</h1>

<label>Piece A:</label>
<select id="A" onchange="hideSelection('A')">
  <option value="">Select Piece...</option>
  <option value="general5">5 Star General</option>
  <option value="general4">4 Star General</option>
  <option value="general3">3 Star General</option>
  <option value="general2">2 Star General</option>
  <option value="general1">1 Star General</option>
  <option value="colonel">Colonel</option>
  <option value="lt_colonel">Lt. Colonel</option>
  <option value="major">Major</option>
  <option value="captain">Captain</option>
  <option value="1lt">1st Lieutenant</option>
  <option value="2lt">2nd Lieutenant</option>
  <option value="sergeant">Sergeant</option>
  <option value="spy">Spy</option>
  <option value="private">Private</option>
  <option value="flag">Flag</option>
</select>

<label>Piece B:</label>
<select id="B" onchange="hideSelection('B')">
  <option value="">Select Piece...</option>
  <option value="general5">5 Star General</option>
  <option value="general4">4 Star General</option>
  <option value="general3">3 Star General</option>
  <option value="general2">2 Star General</option>
  <option value="general1">1 Star General</option>
  <option value="colonel">Colonel</option>
  <option value="lt_colonel">Lt. Colonel</option>
  <option value="major">Major</option>
  <option value="captain">Captain</option>
  <option value="1lt">1st Lieutenant</option>
  <option value="2lt">2nd Lieutenant</option>
  <option value="sergeant">Sergeant</option>
  <option value="spy">Spy</option>
  <option value="private">Private</option>
  <option value="flag">Flag</option>
</select>

<button onclick="judge()">RESOLVE</button>
<button onclick="resetGame()">RESET</button>

<div id="output"></div>
<div class="note">Selections are hidden for fairness, like a real arbiter.</div>
</div>

<script>
// Store hidden selections
let hiddenA = null;
let hiddenB = null;

// Automatically hide selection
function hideSelection(id) {
  const select = document.getElementById(id);
  const val = select.value;
  if (id === "A") hiddenA = val;
  if (id === "B") hiddenB = val;
  select.innerHTML = `<option value="">— HIDDEN —</option>`;
  select.value = "";
}

// Rank strengths (higher number = stronger)
const strength = {
  "general5": 15,
  "general4": 14,
  "general3": 13,
  "general2": 12,
  "general1": 11,
  "colonel": 10,
  "lt_colonel": 9,
  "major": 8,
  "captain": 7,
  "1lt": 6,
  "2lt": 5,
  "sergeant": 4,
  "private": 1,
  "spy": 16,   // special: kills all officers & flag
  "flag": 0
};

function judge() {
  const A = hiddenA;
  const B = hiddenB;

  if (!A || !B) return output("Select both pieces first");

  // Flag special rules
  if (A === "flag" && B === "flag") return output("Both Flags die – GAME OVER");
  if (A === "flag" && B !== "flag") return output("Piece B captured the Flag – GAME OVER");
  if (B === "flag" && A !== "flag") return output("Piece A captured the Flag – GAME OVER");

  // Spy rules
  if (A === "spy" && B === "spy") return output("Both die");
  if (A === "spy") {
    if (B === "private") return output("Piece B wins");
    return output("Piece A wins");
  }
  if (B === "spy") {
    if (A === "private") return output("Piece A wins");
    return output("Piece B wins");
  }

  // Private special rules
  if (A === "private" && B === "spy") return output("Piece A wins");
  if (B === "private" && A === "spy") return output("Piece B wins");

  // Sergeant rules
  if (A === "sergeant" && (B === "private" || B === "flag")) return output("Piece A wins");
  if (B === "sergeant" && (A === "private" || A === "flag")) return output("Piece B wins");

  // Officers & Generals
  if (strength[A] === strength[B]) return output("Both die");
  if (strength[A] > strength[B]) return output("Piece A wins");
  return output("Piece B wins");
}

function output(text) {
  document.getElementById("output").textContent = text;
  // auto-reset hidden selections
  hiddenA = null;
  hiddenB = null;
  document.getElementById("A").innerHTML = `<option value="">Select Piece...</option>
  <option value="general5">5 Star General</option>
  <option value="general4">4 Star General</option>
  <option value="general3">3 Star General</option>
  <option value="general2">2 Star General</option>
  <option value="general1">1 Star General</option>
  <option value="colonel">Colonel</option>
  <option value="lt_colonel">Lt. Colonel</option>
  <option value="major">Major</option>
  <option value="captain">Captain</option>
  <option value="1lt">1st Lieutenant</option>
  <option value="2lt">2nd Lieutenant</option>
  <option value="sergeant">Sergeant</option>
  <option value="spy">Spy</option>
  <option value="private">Private</option>
  <option value="flag">Flag</option>`;

  document.getElementById("B").innerHTML = document.getElementById("A").innerHTML;
}

// Manual reset button
function resetGame() {
  hiddenA = null;
  hiddenB = null;
  document.getElementById("output").textContent = "";
  document.getElementById("A").innerHTML = `<option value="">Select Piece...</option>
  <option value="general5">5 Star General</option>
  <option value="general4">4 Star General</option>
  <option value="general3">3 Star General</option>
  <option value="general2">2 Star General</option>
  <option value="general1">1 Star General</option>
  <option value="colonel">Colonel</option>
  <option value="lt_colonel">Lt. Colonel</option>
  <option value="major">Major</option>
  <option value="captain">Captain</option>
  <option value="1lt">1st Lieutenant</option>
  <option value="2lt">2nd Lieutenant</option>
  <option value="sergeant">Sergeant</option>
  <option value="spy">Spy</option>
  <option value="private">Private</option>
  <option value="flag">Flag</option>`;

  document.getElementById("B").innerHTML = document.getElementById("A").innerHTML;
}
</script>

</body>
</html>
