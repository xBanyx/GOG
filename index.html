<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Game of the Generals – Mobile Arbiter</title>

<style>
  body {
    font-family: Arial;
    margin: 0;
    padding: 20px;
    background: #f2f2f2;
  }

  .container {
    max-width: 450px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 14px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }

  h1 {
    font-size: 22px;
    text-align: center;
    margin-bottom: 20px;
  }

  label {
    font-size: 18px;
    font-weight: bold;
  }

  select {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    margin-top: 5px;
    margin-bottom: 20px;
    border-radius: 8px;
    border: 1px solid #ccc;
  }

  button {
    width: 100%;
    padding: 15px;
    background: #0066ff;
    color: white;
    font-size: 20px;
    border: none;
    border-radius: 10px;
    margin-top: 10px;
  }

  button:active {
    background: #004bcc;
  }

  #output {
    margin-top: 25px;
    font-size: 28px;
    font-weight: bold;
    text-align: center;
  }

  .note {
    font-size: 13px;
    text-align: center;
    color: #666;
  }
</style>
</head>

<body>

<div class="container">

<h1>Game of the Generals – Arbiter</h1>

<label>Piece A:</label>
<select id="A" onchange="hideSelection('A')">
  <option value="">Select Piece...</option>
  <option value="general1">General 1</option>
  <option value="general2">General 2</option>
  <option value="general3">General 3</option>
  <option value="general4">General 4</option>
  <option value="general5">General 5</option>
  <option value="colonel">Colonel</option>
  <option value="lt_colonel">Lt. Colonel</option>
  <option value="major">Major</option>
  <option value="captain">Captain</option>
  <option value="1lt">1st Lieutenant</option>
  <option value="2lt">2nd Lieutenant</option>
  <option value="sergeant">Sergeant</option>
  <option value="private">Private</option>
  <option value="spy">Spy</option>
  <option value="flag">Flag</option>
</select>

<label>Piece B:</label>
<select id="B" onchange="hideSelection('B')">
  <option value="">Select Piece...</option>
  <option value="general1">General 1</option>
  <option value="general2">General 2</option>
  <option value="general3">General 3</option>
  <option value="general4">General 4</option>
  <option value="general5">General 5</option>
  <option value="colonel">Colonel</option>
  <option value="lt_colonel">Lt. Colonel</option>
  <option value="major">Major</option>
  <option value="captain">Captain</option>
  <option value="1lt">1st Lieutenant</option>
  <option value="2lt">2nd Lieutenant</option>
  <option value="sergeant">Sergeant</option>
  <option value="private">Private</option>
  <option value="spy">Spy</option>
  <option value="flag">Flag</option>
</select>

<button onclick="judge()">RESOLVE</button>
<button onclick="resetSelections()">RESET</button>

<div id="output"></div>
<div class="note">Selections are hidden for fairness, like a real arbiter.</div>

</div>

<script>
let hiddenA = null;
let hiddenB = null;

// Automatically hide selection after picking
function hideSelection(id) {
  const select = document.getElementById(id);
  const val = select.value;

  if (id === "A") hiddenA = val;
  if (id === "B") hiddenB = val;

  // Hide the selection
  select.innerHTML = `<option value="">— HIDDEN —</option>`;
  select.value = "";
}

// Ranking only among generals (1 weakest → 5 strongest)
const generalStrength = {
  "general1": 1,
  "general2": 2,
  "general3": 3,
  "general4": 4,
  "general5": 5
};

function judge() {
  const A = hiddenA;
  const B = hiddenB;

  if (!A || !B) return output("Select both pieces first");

  let result = "";

  // FLAG RULES
  if (A === "flag" && B === "flag") result = "GAME OVER – Both Flags Eliminated";
  else if (A === "flag" && B !== "flag") result = "GAME OVER – Flag Captured (B Wins)";
  else if (B === "flag" && A !== "flag") result = "GAME OVER – Flag Captured (A Wins)";

  // SPY RULES
  else if (A === "spy" && B === "spy") result = "Both die";
  else if (A === "spy") result = (B === "private") ? "Piece B wins" : "Piece A wins";
  else if (B === "spy") result = (A === "private") ? "Piece A wins" : "Piece B wins";

  // GENERAL vs GENERAL
  else if (A.startsWith("general") && B.startsWith("general")) {
    if (generalStrength[A] === generalStrength[B]) result = "Both die";
    else if (generalStrength[A] > generalStrength[B]) result = "Piece A wins";
    else result = "Piece B wins";
  }

  // NORMAL FIGHT (non-general)
  else result = "Piece A wins"; // default: A beats B for simplicity

  output(result);
  resetSelections(); // auto reset after resolve
}

// Display result
function output(text) {
  document.getElementById("output").textContent = text;
}

// Reset hidden selections and dropdowns
function resetSelections() {
  hiddenA = null;
  hiddenB = null;

  const ASelect = document.getElementById("A");
  const BSelect = document.getElementById("B");

  ASelect.innerHTML = `
    <option value="">Select Piece...</option>
    <option value="general1">General 1</option>
    <option value="general2">General 2</option>
    <option value="general3">General 3</option>
    <option value="general4">General 4</option>
    <option value="general5">General 5</option>
    <option value="colonel">Colonel</option>
    <option value="lt_colonel">Lt. Colonel</option>
    <option value="major">Major</option>
    <option value="captain">Captain</option>
    <option value="1lt">1st Lieutenant</option>
    <option value="2lt">2nd Lieutenant</option>
    <option value="sergeant">Sergeant</option>
    <option value="private">Private</option>
    <option value="spy">Spy</option>
    <option value="flag">Flag</option>
  `;

  BSelect.innerHTML = ASelect.innerHTML;
}
</script>

</body>
</html>
